@using System.Net.Http
@using Microsoft.AspNetCore.Components.Forms
@using Microsoft.AspNetCore.Components.Layouts
@using Microsoft.AspNetCore.Components.Routing
@using Microsoft.JSInterop
@using MatBlazor
@using Gumby.App
@using Gumby.App.Shared
@inherits RouteBase
@page "/routes"

<style>
    .app-fab--fixed {
        position: fixed;
        bottom: 1rem;
        right: 1rem;
    }
</style>

<MatList SingleSelection="true" TwoLine="true">
    @if (_routeState.Value.Routes.Count == 0)
    {
        <MatListItem>
            <MatListItemText>
                <MatListItemPrimaryText>
                    There appears to be no routes yet!
                </MatListItemPrimaryText>
                <MatBlazor.MatListItemSecondaryText>
                    Click the blue + button below to add the first route.
                </MatBlazor.MatListItemSecondaryText>
            </MatListItemText>
        </MatListItem>
    }
    else
    {
        @foreach (var route in _routeState.Value.Routes)
        {
            <MatListItem>
                <MatListItemText>
                    <MatListItemPrimaryText>
                        @route.RouteName
                    </MatListItemPrimaryText>
                    <MatBlazor.MatListItemSecondaryText>
                        Set on: @route.OriginationDate.ToShortDateString()
                    </MatBlazor.MatListItemSecondaryText>
                </MatListItemText>
            </MatListItem>
        }
    }
</MatList>

<MatFAB class="app-fab--fixed" OnClick="@OpenAddRouteModal" Icon="@MatIconNames.Add"></MatFAB>

<MatDialog IsOpen="@_isOpenAddRouteModal">
    <MatDialogTitle>Add Route</MatDialogTitle>
    <MatDialogContent>
        <MatIcon Icon="@MatIconNames.Receipt"></MatIcon>
    </MatDialogContent>
    <MatDialogActions>
        <MatButton OnClick="@CancelAddRouteClicked">Cancel</MatButton>
        <MatButton OnClick="@OkAddRouteClicked">OK</MatButton>
    </MatDialogActions>
</MatDialog>